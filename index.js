var data = newFunction()





function newFunction() {
    return [
        {
            id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
            name: "深圳市泊寓租赁服务有限公司",
            projects: [
                {
                    project_id: "39e8b034-f745-a763-2979-efdf9c710b78",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "骏哥哥内部划拨测试0726",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39e7e43a-f174-3ee0-d1ea-73b2cb2aebc5",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "123",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39eae22c-535c-f2dc-d211-10b1bfef9d81",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "249892365@qq.com",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39eabe47-7942-45aa-b28b-274d9ec474ce",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "第三方",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e7e3e6-5013-44b8-d9ae-da8f47377f98",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "kgsadjh",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e7ee47-213c-f954-9322-af1acaccb9a4",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "骏哥哥要求再建多两条_1",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39e8bcce-2b0f-e5d0-b1dc-fd1229232373",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "中海香蜜湖一号",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e72949-0b92-87f0-77bd-1e5078213d0e",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "测试0001",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e53ae7-2972-bfc8-c7a3-8f333af1f4ff",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "泊寓-布吉店 阿涛测试",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e98974-ffdb-912e-0e7c-632c7bb060af",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "duan1015aacc",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea5176-69ad-4d32-bd96-121689f5e82d",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "duan开业测试112301",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39ea61ad-8ceb-b6b3-4245-22465d5ad4a5",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "26号万村项目",
                    project_source: "万村拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39eae2ce-a187-008b-d6f5-c623fd16e025",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "caicai1221003(万村)",
                    project_source: "万村拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea50a2-529f-f4b5-54c2-db18d57c87d2",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "深圳龙华街道富泉新村(万村)",
                    project_source: "万村拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39e7e4e7-6c27-6a58-7402-dc6f38f5cc08",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "拓展测试2123",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e7e776-3631-1e10-c45b-f1683f931bda",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "Refrain测试",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e907e0-e306-8ba9-278d-f95c535a9ea5",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "duan092001",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e8675a-8269-7aba-82f6-555a95cae5f2",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "我的小窝窝",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e7aa41-412e-f775-826a-ce7363a61d61",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "zzy",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39ea5207-e202-e31a-b10e-0a3cadd2c204",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "万村拓展包",
                    project_source: "万村拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e7e4d7-e1f0-e44c-3400-0c5a184752e3",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "拓展测试1327",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39ea6171-34b2-affe-d632-2828441e8001",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "11.266万村",
                    project_source: "万村拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e8d8ac-3a8b-4795-d08b-296a29ecdd48",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "测试项目001-1",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39d652ab-65f9-6ed4-669f-b2ecf9f27a1a",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "万科驿（科技园店）［测试］",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39ea6180-157a-9956-c765-5f8fa11a150c",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "啊啊啊",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39e70e75-1ea4-7811-1f9f-36a18321c73a",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "泊寓测试-深圳1",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea6107-3b8c-d837-b076-e508751172ef",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "duan万村拓展测试112601",
                    project_source: "万村拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39ea50d7-0af2-406b-7790-7af2fe445f50",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "11月23日的内部划拨项目",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea03d0-4241-1b06-7214-b02ec86e65d3",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "广州金色家园",
                    project_source: "泊寓拓展",
                    is_project_expand: "0",
                    is_old_back: false
                },
                {
                    project_id: "39ea50d7-0af2-406b-7790-7af2fe445f50",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "11月23日的内部划拨项目",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea28b0-a354-f3cb-04a6-eb5880d61291",
                    project_name: "泊寓测试关联公司",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
                    project_name: "深圳公司后台部门",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "672834db-e8c3-11e8-8ce0-7cd30aeaf790",
                    project_name: "泊寓测试关联公司2",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    project_name: "深圳市泊寓租赁服务有限公司后台部门",
                    project_company_id: "39e41552-2b63-c709-e3b7-55d394d47ba1",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39ea60da-72a8-269a-f2f8-3e71ef6bb3e4",
            name: "深圳市万村发展有限公司",
            projects: [
                {
                    project_id: "39ea5216-13ab-3530-5ec0-ad03ba3edd08",
                    project_company_id: "39ea60da-72a8-269a-f2f8-3e71ef6bb3e4",
                    project_name: "duan内部划拨11230002",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea4721-4b47-a9c0-2c5b-6e47cf56f5a8",
                    project_name: "测试",
                    project_company_id: "39ea60da-72a8-269a-f2f8-3e71ef6bb3e4",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39ea4721-e07b-4348-bd99-e80dc2ba20e8",
                    project_name: "111",
                    project_company_id: "39ea60da-72a8-269a-f2f8-3e71ef6bb3e4",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39ea60da-72a8-269a-f2f8-3e71ef6bb3e4",
                    project_name: "深圳市万村发展有限公司后台部门",
                    project_company_id: "39ea60da-72a8-269a-f2f8-3e71ef6bb3e4",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39ea6621-32ec-ea04-0a8c-826fa57c1fff",
            name: "小泊厉害111",
            projects: [
                {
                    project_id: "39e7e2f9-839f-4843-bfa6-ea4082cfdd14",
                    project_company_id: "39ea6621-32ec-ea04-0a8c-826fa57c1fff",
                    project_name: "小岚岚",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea50a2-53f2-d4a1-3ce8-5a07360f3272",
                    project_company_id: "39ea6621-32ec-ea04-0a8c-826fa57c1fff",
                    project_name: "沃土01(万村)",
                    project_source: "万村拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea50a2-53ff-c0e6-630c-2cd5d3d3ff91",
                    project_company_id: "39ea6621-32ec-ea04-0a8c-826fa57c1fff",
                    project_name: "jsj(万村)",
                    project_source: "万村拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ea6621-32ec-ea04-0a8c-826fa57c1fff",
                    project_name: "小泊厉害111后台部门",
                    project_company_id: "39ea6621-32ec-ea04-0a8c-826fa57c1fff",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39ea6f6f-bb46-a553-8cfc-bf2ea7e9b9ed",
            name: "11111",
            projects: [
                {
                    project_id: "39ea6f6f-bb46-a553-8cfc-bf2ea7e9b9ed",
                    project_name: "11111后台部门",
                    project_company_id: "39ea6f6f-bb46-a553-8cfc-bf2ea7e9b9ed",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39eab925-10e3-edeb-9f5c-b9da961f8afb",
            name: "南通小波肉纺织品有限公司",
            projects: [
                {
                    project_id: "39eab445-b9c9-ee4f-b837-516734da48b0",
                    project_company_id: "39eab925-10e3-edeb-9f5c-b9da961f8afb",
                    project_name: "周先生的项目001(万村)",
                    project_source: "万村拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39e988b1-7be9-38dc-5670-0e53409350bc",
                    project_company_id: "39eab925-10e3-edeb-9f5c-b9da961f8afb",
                    project_name: "xh_1015_ 内部划拨",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39eab925-10e3-edeb-9f5c-b9da961f8afb",
                    project_name: "南通小波肉纺织品有限公司后台部门",
                    project_company_id: "39eab925-10e3-edeb-9f5c-b9da961f8afb",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39ead229-e378-e7d4-6c6b-2a13427e80af",
            name: "广州万科置业有限公司",
            projects: [
                {
                    project_id: "39ead74a-a7d7-7bdb-3349-19a976f23fad",
                    project_company_id: "39ead229-e378-e7d4-6c6b-2a13427e80af",
                    project_name: "测试泊寓房东合同中止之后卡片状态同步更新用",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ead226-2f7f-03aa-e4d5-0725998d5a17",
                    project_company_id: "39ead229-e378-e7d4-6c6b-2a13427e80af",
                    project_name: "泊寓房东合同确认交付生成资产卡片拉通测试用",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39ead334-537c-ba00-4150-cd0058b56db3",
                    project_company_id: "39ead229-e378-e7d4-6c6b-2a13427e80af",
                    project_name: "泊寓房东合同确认交付生成资产卡片拉通测试用01",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39eaecfc-649a-2ec3-ff61-5f3af2bc065b",
                    project_name: "华为技术有限公司",
                    project_company_id: "39ead229-e378-e7d4-6c6b-2a13427e80af",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39ead229-e378-e7d4-6c6b-2a13427e80af",
                    project_name: "广州万科置业有限公司后台部门",
                    project_company_id: "39ead229-e378-e7d4-6c6b-2a13427e80af",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39eaf13e-7e66-c6c7-b288-957cf3facfb0",
            name: "华为技术有限公司",
            projects: [
                {
                    project_id: "39eaf139-fa34-cce0-b04f-b627438c55c4",
                    project_company_id: "39eaf13e-7e66-c6c7-b288-957cf3facfb0",
                    project_name: "测试资产卡片四期需求用00",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39eaf13d-da00-4ef9-5aec-1ed26493dabd",
                    project_name: "深圳市小泊科技有限公司",
                    project_company_id: "39eaf13e-7e66-c6c7-b288-957cf3facfb0",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39eb05d0-acac-d4d2-59b1-396a9f07c834",
                    project_name: "这个肯定是唯一的有限公司_update",
                    project_company_id: "39eaf13e-7e66-c6c7-b288-957cf3facfb0",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39eaf13e-7e66-c6c7-b288-957cf3facfb0",
                    project_name: "华为技术有限公司后台部门",
                    project_company_id: "39eaf13e-7e66-c6c7-b288-957cf3facfb0",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39eaf21d-4669-688b-1798-73761a939eb5",
            name: "深圳市小泊科技有限公司",
            projects: [
                {
                    project_id: "39eaf237-55a1-3b99-79b5-6accfdfca593",
                    project_company_id: "39eaf21d-4669-688b-1798-73761a939eb5",
                    project_name: "测试资产卡片四期需求用01",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39eaf239-aadb-68f4-faff-140af9c68f93",
                    project_name: "测试用有限公司",
                    project_company_id: "39eaf21d-4669-688b-1798-73761a939eb5",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39eaf21d-4669-688b-1798-73761a939eb5",
                    project_name: "深圳市小泊科技有限公司后台部门",
                    project_company_id: "39eaf21d-4669-688b-1798-73761a939eb5",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39eb04df-533c-67bf-4d74-75d51dfb6f8a",
            name: "小白股权投资(广州)有限公司",
            projects: [
                {
                    project_id: "39eb04df-533c-67bf-4d74-75d51dfb6f8a",
                    project_name: "小白股权投资(广州)有限公司后台部门",
                    project_company_id: "39eb04df-533c-67bf-4d74-75d51dfb6f8a",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39eb0ac9-e49c-b14a-2ba0-9e8b62f7e0e2",
            name: "ceshi1",
            projects: [
                {
                    project_id: "39ea5173-90ab-13cb-184d-5f9dc5bfbc26",
                    project_company_id: "39eb0ac9-e49c-b14a-2ba0-9e8b62f7e0e2",
                    project_name: "11月23日意向项目",
                    project_source: "泊寓拓展",
                    is_project_expand: "1",
                    is_old_back: false
                },
                {
                    project_id: "39eb0ac9-e49c-b14a-2ba0-9e8b62f7e0e2",
                    project_name: "ceshi1后台部门",
                    project_company_id: "39eb0ac9-e49c-b14a-2ba0-9e8b62f7e0e2",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        },
        {
            id: "39eb3924-9c4c-eff0-a22b-b213dbd8abea",
            name: "杭州娃哈哈进出口有限公司",
            projects: [
                {
                    project_id: "39eb3923-2066-aaec-5e8e-c52aaf8926ae",
                    project_name: "吖24242424",
                    project_company_id: "39eb3924-9c4c-eff0-a22b-b213dbd8abea",
                    is_old_back: false,
                    is_project_expand: "0"
                },
                {
                    project_id: "39eb3924-9c4c-eff0-a22b-b213dbd8abea",
                    project_name: "杭州娃哈哈进出口有限公司后台部门",
                    project_company_id: "39eb3924-9c4c-eff0-a22b-b213dbd8abea",
                    is_old_back: true,
                    is_project_expand: "0"
                }
            ]
        }
    ];
}

const listdata = [
    {
          "id": "39eb3f04-10e3-5d75-06b2-71dc90b88707",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2018.12",
          "expenditure_subject_id": "9f103bc2-0d36-11e7-9465-00163e003632",
          "month": "12",
          "year": "2018",
          "km_name": "办公费",
          "code": "JP020DC01201901080004",
          "amount": "600.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "200.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2018.12",
          "project_name": "深圳公司后台部门"
    },
    {
          "id": "39eb3f04-10e3-5d75-06b2-71dc90b88707",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.1",
          "expenditure_subject_id": "9f103bc2-0d36-11e7-9465-00163e003632",
          "month": "1",
          "year": "2019",
          "km_name": "办公费",
          "code": "JP020DC01201901080004",
          "amount": "600.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "200.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3f04-10e3-5d75-06b2-71dc90b88707",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.2",
          "expenditure_subject_id": "9f103bc2-0d36-11e7-9465-00163e003632",
          "month": "2",
          "year": "2019",
          "km_name": "办公费",
          "code": "JP020DC01201901080004",
          "amount": "600.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "200.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.2",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3f04-10e3-6171-5a99-4b9b939b7ffe",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2018.12",
          "expenditure_subject_id": "5f087449-0d37-11e7-9465-00163e003632",
          "month": "12",
          "year": "2018",
          "km_name": "客户活动费用",
          "code": "JP020DC01201901080004",
          "amount": "300.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "100.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2018.12",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3f04-10e3-6171-5a99-4b9b939b7ffe",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.1",
          "expenditure_subject_id": "5f087449-0d37-11e7-9465-00163e003632",
          "month": "1",
          "year": "2019",
          "km_name": "客户活动费用",
          "code": "JP020DC01201901080004",
          "amount": "300.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "100.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3f04-10e3-6171-5a99-4b9b939b7ffe",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.2",
          "expenditure_subject_id": "5f087449-0d37-11e7-9465-00163e003632",
          "month": "2",
          "year": "2019",
          "km_name": "客户活动费用",
          "code": "JP020DC01201901080004",
          "amount": "300.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "100.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.2",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3f02-feb6-fcf8-e7ae-eff778ca4f5f",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.1",
          "expenditure_subject_id": "49bf300a-9b84-11e8-a0cb-7cd30aeb45a0",
          "month": "1",
          "year": "2019",
          "km_name": "会议费",
          "code": "JP020DC01201901080006",
          "amount": "1000.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "1000.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3efb-e479-2221-af94-65d9ab30ab8e",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已结算",
          "payed_on": "2019-01-08 17:34:17",
          "belong_date": "2018.12",
          "expenditure_subject_id": "b08ccf05-9af4-11e8-a0cb-7cd30aeb45a0",
          "month": "12",
          "year": "2018",
          "km_name": "项目工资",
          "code": "JP020DC01201901080005",
          "amount": "200.00",
          "pay_amount": "200.00",
          "total_freeze_amount": "0.00",
          "total_pay_amount": "100.00",
          "total_release_amount": "0.00",
          "freeze_year": "2018.12",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3efb-e479-2221-af94-65d9ab30ab8e",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已结算",
          "payed_on": "2019-01-08 17:34:17",
          "belong_date": "2019.1",
          "expenditure_subject_id": "b08ccf05-9af4-11e8-a0cb-7cd30aeb45a0",
          "month": "1",
          "year": "2019",
          "km_name": "项目工资",
          "code": "JP020DC01201901080005",
          "amount": "200.00",
          "pay_amount": "200.00",
          "total_freeze_amount": "0.00",
          "total_pay_amount": "100.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3efb-e479-4e55-d3fd-2b23f4f9e1e2",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已结算",
          "payed_on": "2019-01-08 17:34:17",
          "belong_date": "2018.12",
          "expenditure_subject_id": "9f103bc2-0d36-11e7-9465-00163e003632",
          "month": "12",
          "year": "2018",
          "km_name": "办公费",
          "code": "JP020DC01201901080005",
          "amount": "100.00",
          "pay_amount": "100.00",
          "total_freeze_amount": "0.00",
          "total_pay_amount": "50.00",
          "total_release_amount": "0.00",
          "freeze_year": "2018.12",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3efb-e479-4e55-d3fd-2b23f4f9e1e2",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "还款单",
          "business_title": "周转借款",
          "starting_time": "2019-01-08",
          "status": "已结算",
          "payed_on": "2019-01-08 17:34:17",
          "belong_date": "2019.1",
          "expenditure_subject_id": "9f103bc2-0d36-11e7-9465-00163e003632",
          "month": "1",
          "year": "2019",
          "km_name": "办公费",
          "code": "JP020DC01201901080005",
          "amount": "100.00",
          "pay_amount": "100.00",
          "total_freeze_amount": "0.00",
          "total_pay_amount": "50.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3eda-01bd-088b-7262-1a85e2e616af",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "合同",
          "business_title": "后台",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2018.12",
          "expenditure_subject_id": "ee8639fa-b1eb-11e8-a0cb-7cd30aeb45a0",
          "month": "12",
          "year": "2018",
          "km_name": "租金成本",
          "code": "HTJNG5201901080002",
          "amount": "100.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "33.33",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2018.12",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3eda-01bd-088b-7262-1a85e2e616af",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "合同",
          "business_title": "后台",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.1",
          "expenditure_subject_id": "ee8639fa-b1eb-11e8-a0cb-7cd30aeb45a0",
          "month": "1",
          "year": "2019",
          "km_name": "租金成本",
          "code": "HTJNG5201901080002",
          "amount": "100.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "33.33",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3eda-01bd-088b-7262-1a85e2e616af",
          "project_id": "39ea4b9a-fbb8-1663-946b-29d4088e4c7f",
          "type": "合同",
          "business_title": "后台",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.2",
          "expenditure_subject_id": "ee8639fa-b1eb-11e8-a0cb-7cd30aeb45a0",
          "month": "2",
          "year": "2019",
          "km_name": "租金成本",
          "code": "HTJNG5201901080002",
          "amount": "100.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "33.34",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.2",
          "project_name": "深圳公司后台部门"
        },
        {
          "id": "39eb3eac-91f7-9598-001b-0a72d3700fdc",
          "project_id": "39e7e776-3631-1e10-c45b-f1683f931bda",
          "type": "还款单",
          "business_title": "结核",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.1",
          "expenditure_subject_id": "9f103bc2-0d36-11e7-9465-00163e003632",
          "month": "1",
          "year": "2019",
          "km_name": "办公费",
          "code": "JP020DC01201901080003",
          "amount": "2.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "1.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "Refrain测试"
        },
        {
          "id": "39eb3eac-91f7-9598-001b-0a72d3700fdc",
          "project_id": "39e7e776-3631-1e10-c45b-f1683f931bda",
          "type": "还款单",
          "business_title": "结核",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.2",
          "expenditure_subject_id": "9f103bc2-0d36-11e7-9465-00163e003632",
          "month": "2",
          "year": "2019",
          "km_name": "办公费",
          "code": "JP020DC01201901080003",
          "amount": "2.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "1.00",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.2",
          "project_name": "Refrain测试"
        },
        {
          "id": "39eb3eac-91f7-9e5b-018e-b45458027771",
          "project_id": "39e7e776-3631-1e10-c45b-f1683f931bda",
          "type": "还款单",
          "business_title": "结核",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.1",
          "expenditure_subject_id": "b09c0e62-9af4-11e8-a0cb-7cd30aeb45a0",
          "month": "1",
          "year": "2019",
          "km_name": "职员车辆费",
          "code": "JP020DC01201901080003",
          "amount": "1.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "0.50",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "Refrain测试"
        },
        {
          "id": "39eb3eac-91f7-9e5b-018e-b45458027771",
          "project_id": "39e7e776-3631-1e10-c45b-f1683f931bda",
          "type": "还款单",
          "business_title": "结核",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.2",
          "expenditure_subject_id": "b09c0e62-9af4-11e8-a0cb-7cd30aeb45a0",
          "month": "2",
          "year": "2019",
          "km_name": "职员车辆费",
          "code": "JP020DC01201901080003",
          "amount": "1.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "0.50",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.2",
          "project_name": "Refrain测试"
        },
        {
          "id": "39eb3e45-1a0a-05ae-854b-d6a28b9f527f",
          "project_id": "39ea4721-4b47-a9c0-2c5b-6e47cf56f5a8",
          "type": "合同",
          "business_title": "98080",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2018.12",
          "expenditure_subject_id": "b09c0e62-9af4-11e8-a0cb-7cd30aeb45a0",
          "month": "12",
          "year": "2018",
          "km_name": "职员车辆费",
          "code": "HTXX201901080001",
          "amount": "2000.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "666.67",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2018.12",
          "project_name": "测试"
        },
        {
          "id": "39eb3e45-1a0a-05ae-854b-d6a28b9f527f",
          "project_id": "39ea4721-4b47-a9c0-2c5b-6e47cf56f5a8",
          "type": "合同",
          "business_title": "98080",
          "starting_time": "2019-01-08",
          "status": "已冻结",
          "payed_on": null,
          "belong_date": "2019.1",
          "expenditure_subject_id": "b09c0e62-9af4-11e8-a0cb-7cd30aeb45a0",
          "month": "1",
          "year": "2019",
          "km_name": "职员车辆费",
          "code": "HTXX201901080001",
          "amount": "2000.00",
          "pay_amount": "0.00",
          "total_freeze_amount": "666.67",
          "total_pay_amount": "0.00",
          "total_release_amount": "0.00",
          "freeze_year": "2019.1",
          "project_name": "测试"
    }
];













class TranslateTreeIntoList {
    constructor({
        data = {},
        childNameList = [],
        targetNameList = [],
    }){
        this.childNameList = childNameList;
        this.targetNameList = targetNameList;
        this.data = data;
        this.list = [];
        this.initData();
    }
    hasChildren(node){
        for (let i = 0; i < this.childNameList.length; i++) {
            if(node[this.childNameList[i]]){
                return node[this.childNameList[i]]
            }
        }
        return false;
    }
    
    getNodeName (node) {
        for (let i = 0; i < this.targetNameList.length; i++) {
            if(node[this.targetNameList[i]]){
                return node[this.targetNameList[i]]
            }
        }
        return false;
    }
    
    initData () {
        if(!this.data || this.data==[]) {
            return []
        } else if(this.data.length>0){
            this.data.forEach(node=>{
                this.findPath({node,path:this.getNodeName(node)});
            })
        }
    }
    // 找到底部，并且记录寻径步骤
    // 当目标节点没有子节点，认为已经找到了底，仅仅返回false，但是向大类，push一个
    findPath({node,path=''}){
        if (this.hasChildren(node)) {
            this.hasChildren(node).forEach(node=>{
                name = path + " > " + this.getNodeName(node);
                this.findPath({node,path:name});
            })
        } else {
            this.list.push(path);
        };
    }
}























function Select2({
    select,
    data = [],
    childNameList = [],
    targetNameList = [],
    level=[]
}){
    this.container = document.createElement('div');
    this.input = document.createElement('input');
    this.select = select;                                           // select 元素
    this.width = this.select.getBoundingClientRect().width;         // select 元素宽度
    this.level = level;                                             // 事项分类，费用名称。。。
    this.data = data;                                               // 二级数据
    this.childNameList = [...childNameList,'child','children','projects'];
    this.targetNameList = [...targetNameList,'name','project_name'];
    this.list = (new TranslateTreeIntoList({
        data,
        childNameList: this.childNameList,
        targetNameList: this.targetNameList,
    })).list;           // 转换后的扁平化的二级数据
    this.init();
    
    window.select = this;
}

Select2.prototype = new TranslateTreeIntoList({data:{}});

Select2.prototype.init = function(){
    this.initElement();
    this.initCss();
    this.bindEvent();
};
Select2.prototype.initElement = function(){
    this.select.classList.add('hide');
    this.input.className = 'form-control';
    this.container.className = 'container';
    this.input.autofocus = true;
    this.select.parentElement.insertBefore(this.input,this.select);
    this.select.parentElement.insertBefore(this.container,this.select);
}
Select2.prototype.bindEvent = function(){
    this.input.addEventListener('keyup',(e) => {
        if(e.target.value.length>0){
            this.globalMatch(e.target.value);
        } else {
            this.selectMatch(e.target.value);
        }
    })

    this.input.addEventListener('click',(e) => {
        if(e.target.value.length == 0){
            this.selectMatch(e.target.value);
        }
    })

    this.container.addEventListener('click',(e) => {
        const getTargetDom = ({dom,className}) =>{
            if (dom.classList.contains(className)) {
                return dom;
            } else if (dom.parentElement.classList.contains(className)) {
                return dom.parentElement;
            } else if (dom.parentElement.parentElement.classList.contains(className)) {
                return dom.parentElement.parentElement;
            } else {
                return false;
            }
        };
        const isDom = getTargetDom({dom:e.target,className:'list'})
        if (isDom) {
            if (isDom.parentElement.classList.contains('global-select-container')) {
                // 全局选择
                this.container.innerHTML = '';
                this.input.value = isDom.title;
            } else if (isDom.parentElement.classList.contains('body')) {
                // 为root数据模型添加属性，表示当前选择的元素
                isDom.parentElement.parentElement.root.selectIndex = isDom.dataset.index;
                this.selectMatch();
                if(!this.hasChildren(isDom.parentElement.parentElement.root[isDom.dataset.index])){
                    console.log(
                        '这个是最终选项'
                    );
                }
            }
        }
    })
}


Select2.prototype.initCss = function(){
    if(!document.querySelector('style.wdqwdwdwdw')){
        const style = document.createElement('style');
        style.className = 'wdqwdwdwdw';
        style.innerHTML = `
            .container {
                position: absolute;
                top: ${this.input.getBoundingClientRect().top+37}px;
                left: ${this.input.getBoundingClientRect().left}px;
                padding: 0;
                width: auto;
                overflow: hidden;
                background: white;
                border: 1px solid #C2CAD8FF;
                border-radius: 5px;
                display: flex;
            }
            .global-select-container {
                padding: 0;
                width: ${this.width}px;
                height: 160px;
                overflow: auto;
                background: white;
            }
            .container .empty {
                height: 100%;
                width: ${this.width}px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                font-size: 12px;
                color: rgba(102, 102, 102, 1);
            }
            .container .empty img {
                width: 120px;
                margin: 12px;
            }
            .container .list {
                color: rgba(102, 102, 102, 1);
                padding: 0 13px;
                height: 30px;
                line-height: 30px;
                cursor: pointer;
                width: 100%;
                font-size: 12px;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }
            .container .list.active {
                background: rgba(53, 152, 220, 0.2);
            }
            .container .list:hover {
                background: rgba(53, 152, 220, 0.2);
            }
            .container .list .match {
                color: rgba(53, 152, 220, 1);
            }
            .container .level-select-container {
                width: ${this.width/3}px;
                height: 160px;
            }
            .container .level-select-container + .level-select-container {
                border-left: 1px solid #C2CAD8FF;
            }

            .container .level-select-container .head {
                font-size: 14px;
                font-weight: bold;
                padding: 0 13px;
                line-height: 30px;
                height: 30px;
            }
            .container .level-select-container .body {
                height: calc(100% - 30px);
                overflow: auto;
                font-size: 12px;
            }
        `;
        document.head.appendChild(style);
    }
}
// 全局匹配 ，当输入文字的时候触发
Select2.prototype.globalMatch = function(value){
    const filterList = this.list.filter(e=>e.match(value));
    if (filterList.length > 0) {
        const reg = new RegExp(`(${value})`);
        this.container.innerHTML = '<div class="global-select-container">'+filterList
            .map(e=> `
                <div class="list detail" title="${e}">
                    ${e.replace(reg,'<span class="match">$1</span>')}
                </div>
            `)
            .join('')+'</div>'
    } else if (filterList.length == 0) {
        this.container.innerHTML = `<div class="empty">
            <img src="https://static.pipk.top/api/public/images/8731889192064048.png"/>
            <p>无结果</p>
        </div>`
    }
}
// 3级匹配 ，当输入文字的时候触发
Select2.prototype.selectMatch = function() {
    const generatContainer = ({data,head})=>{
        const container = document.createElement('div');
        container.className = 'level-select-container';
        container.root = data;
        container.innerHTML = `
            <div class="head">
                ${head}
            </div>
            <div class="body">
                ${data.map((e,i)=>`<div title="${this.getNodeName(e)}" data-index="${i}" class="list ${data.selectIndex==i?'active':''}">${this.getNodeName(e)}</div>`).join('')}
            </div>
        `;
        return container;
    };
    this.container.innerHTML = '';
    let i = 0;
    const recursion = ({data})=>{
        this.container.append(generatContainer({data,head:this.level[i++]}));
        // 如果有子元素，继续递归
        if(
            data.selectIndex > -1 &&
            this.hasChildren(data[data.selectIndex])
        ){
            recursion({data:this.hasChildren(data[data.selectIndex])});
        };
    };
    recursion({data:this.data})
}


// Select2.prototype



new Select2({
    select: document.querySelector(".select2"),
    level: ['事项分类','费用分类','费用名称'],
    data,
})
















